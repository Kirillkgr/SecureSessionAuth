# Fast Auth API - PoC

Срочная задача: сделать простое, но безопасное REST API для аутентификации на Spring Boot.
**Время на выполнение:** 30-45 минут.

Проект представляет собой легковесный сервис с двумя эндпоинтами для регистрации и проверки пользователя. Пароли
хешируются через **BCrypt** и сохраняются в **Caffeine** кэш.

## Технический стек

- **Java 21**
- **Spring Boot 3.5.4**
- **Spring Framework** (Web, Security, Context-Support)
- **Caffeine Cache** (in-memory кэш)
- **Maven**

## Запуск

Стандартно, через Maven Wrapper:

```bash
./mvnw spring-boot:run
```

Сервис поднимется на `http://localhost:8080`.

## Эндпоинты API

Все эндпоинты находятся под префиксом `/auth`.

### 1. Регистрация пользователя

Сохраняет пользователя в кэш. Пароль автоматически хешируется.

**Запрос:**

```http
POST /auth/register
Content-Type: application/json

{
  "username": "test_user",
  "password": "Str0ngP@ssw0rd!"
}
```

**Ответ:**

```http
HTTP/1.1 200 OK
```

### 2. Проверка пользователя

Проверяет, существует ли пользователь с таким паролем в кэше.

**Запрос:**

```http
POST /auth/check
Content-Type: application/json

{
  "username": "test_user",
  "password": "Str0ngP@ssw0rd!"
}
```

**Успешный ответ:**

```http
HTTP/1.1 200 OK

true
```

**Неуспешный ответ (неверный пароль или юзер):**

```http
HTTP/1.1 200 OK

false
```

## Обоснование принятых решений (по-быстрому)

- **Минимальные зависимости**: Чтобы не тащить лишнего, стартеры не использовались. Только `spring-web`,
  `spring-security` и `spring-context-support` для интеграции кэша. Это уменьшает размер сборки и ускоряет запуск.
- **Никакого Lombok**: Весь код написан явно, чтобы было проще отлаживать и не было скрытой магии. Для DTO используется
  обычный класс.
- **Безопасность**: Пароли хешируются **BCrypt** с силой `12`. Это индустриальный стандарт, достаточно надежно для такой
  задачи. Эндпоинты `/auth/**` открыты, все остальное по умолчанию требует аутентификации (
  `.anyRequest().authenticated()`).
- **Кэширование**: **Caffeine** выбран как один из самых быстрых in-memory кэшей для Java. Конфигурация в
  `application.properties` (`spring.cache.caffeine.spec`) позволяет быстро настроить TTL и максимальный размер кэша без
  пересборки.
- **Тесты**: Юнит-тесты для `AuthService` написаны с использованием **Mockito**, чтобы они работали максимально быстро и
  не требовали поднятия всего Spring-контекста. Это критично для CI/CD.
